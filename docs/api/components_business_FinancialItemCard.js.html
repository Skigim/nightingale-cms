<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/business/FinancialItemCard.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/business/FinancialItemCard.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* eslint-disable react/prop-types */
/**
 * Nightingale Component Library - FinancialItemCard
 * Layer: Business (Domain-Specific)
 *
 * Display financial items in the case details view using the generic Card UI component.
 * Handles financial item display with Nightingale CMS business logic and formatting.
 *
 * Preview-style card designed for financial management sections.
 */
function FinancialItemCard({
  item,
  itemType,
  onEdit = () => {},
  onDelete = () => {},
  onDeleteConfirm = () => {},
  onDeleteCancel = () => {},
  confirmingDelete = false,
  showActions = true,
}) {
  const e = window.React.createElement;
  const { useMemo, useCallback } = window.React;

  // Get verification status text for Badge component
  const getVerificationStatus = useMemo(() => {
    if (!item) return { text: 'Pending' };

    const status = (item.verificationStatus || 'pending').toLowerCase();
    const statusMap = {
      verified: { text: 'Verified' },
      pending: { text: 'VR Pending' },
      unverified: { text: 'Needs VR' },
      'not-required': { text: 'Review Pending' },
      'needs-vr': { text: 'Needs VR' },
      'vr-pending': { text: 'VR Pending' },
      'review-pending': { text: 'Review Pending' },
      'avs-pending': { text: 'AVS Pending' },
      'avs pending': { text: 'AVS Pending' },
    };

    let badgeText = statusMap[status] || statusMap.pending;

    // Append verification source in parentheses for verified items
    if (status === 'verified' &amp;&amp; item.verificationSource) {
      badgeText = { text: `${badgeText.text} (${item.verificationSource})` };
    }

    return badgeText;
  }, [item]);

  // Format currency amounts with frequency
  const formatCurrency = (amount) => {
    const numericAmount = parseFloat(amount) || 0;
    return new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
    }).format(numericAmount);
  };

  // Format frequency display for income/expense items
  const formatFrequency = (frequency) => {
    const frequencyMap = {
      monthly: '/mo',
      yearly: '/yr',
      weekly: '/wk',
      daily: '/day',
      'one-time': ' (1x)',
    };
    return frequencyMap[frequency] || '';
  };

  // Format account number to show only last 4 digits
  const formatAccountNumber = (accountNumber) => {
    if (!accountNumber) return '';
    // Extract only the last 4 digits
    const digits = accountNumber.replace(/\D/g, ''); // Remove non-digits
    if (digits.length &lt;= 4) return digits;
    return digits.slice(-4);
  };

  // Get display amount with frequency (but not for resources)
  const getDisplayAmount = useMemo(() => {
    if (!item) return '$0';

    const amount = item.amount || item.value || 0;
    const baseAmount = formatCurrency(amount);

    // Only show frequency for income and expense items, not resources
    if (item.frequency &amp;&amp; itemType !== 'resources') {
      return baseAmount + formatFrequency(item.frequency);
    }

    return baseAmount;
  }, [item, itemType]);

  // Handle delete button click
  const handleDeleteClick = useCallback(
    (e) => {
      e.stopPropagation();
      if (confirmingDelete) {
        onDeleteCancel();
      } else {
        onDelete(item);
      }
    },
    [confirmingDelete, onDeleteCancel, onDelete, item]
  );

  // Handle delete confirmation
  const handleDeleteConfirm = useCallback(
    (e) => {
      e.stopPropagation();
      onDeleteConfirm(item);
    },
    [onDeleteConfirm, item]
  );

  // Card content for preview display
  const cardContent = useMemo(() => {
    if (!item) return null;

    return e(
      'div',
      { className: 'space-y-2' },

      // Top row: Description and Amount
      e(
        'div',
        { className: 'flex justify-between items-start' },
        e(
          'div',
          { className: 'flex-1' },
          e(
            'h6',
            { className: 'font-medium text-gray-200 text-sm' },
            item.description || item.type || 'Untitled Item'
          )
        ),
        e(
          'div',
          { className: 'text-gray-200 font-medium text-sm ml-3' },
          getDisplayAmount
        )
      ),

      // Second row: Institution (if available)
      item.location &amp;&amp;
        e('div', { className: 'text-xs text-gray-400' }, item.location),

      // Third row: Account Number with Badge
      e(
        'div',
        { className: 'flex justify-between items-center' },
        // Account Number (if available, showing only last 4 digits)
        item.accountNumber
          ? e(
              'div',
              { className: 'text-xs text-gray-400' },
              formatAccountNumber(item.accountNumber)
            )
          : e('div'), // Empty div to maintain flex layout
        // Badge - right side
        e(window.Badge, {
          status: getVerificationStatus.text,
          variant: 'verification',
          size: 'sm',
        })
      ),

      // Action buttons (only shown when confirming delete)
      showActions &amp;&amp;
        confirmingDelete &amp;&amp;
        e(
          'div',
          {
            className:
              'flex justify-end space-x-1 pt-2 border-t border-gray-600',
          },
          // Confirm button (green check)
          e(window.Button, {
            variant: 'success',
            size: 'sm',
            onClick: handleDeleteConfirm,
            children: '✓',
          }),
          // Cancel button (red X)
          e(window.Button, {
            variant: 'danger',
            size: 'sm',
            onClick: handleDeleteClick,
            children: '✗',
          })
        )
    );
  }, [
    item,
    getDisplayAmount,
    getVerificationStatus,
    showActions,
    confirmingDelete,
    handleDeleteConfirm,
    handleDeleteClick,
    e,
  ]);

  // Don't render if no item provided
  if (!item) return null;

  // Return the card with preview styling
  return e(
    'div',
    {
      className: [
        'bg-gray-700 border border-gray-600 p-4 rounded-lg cursor-pointer',
        'hover:shadow-lg hover:-translate-y-0.5 transform transition-all duration-200',
        'hover:border-gray-500',
      ].join(' '),
      onClick: () => onEdit(item),
    },
    cardContent
  );
}

/**
 * FinancialItemList - Display multiple financial items in a list layout
 */
function FinancialItemList({
  items = [],
  itemType,
  onEdit = () => {},
  onDelete = () => {},
  onDeleteConfirm = () => {},
  onDeleteCancel = () => {},
  confirmingDelete = null,
  onAdd = () => {},
  title = 'Financial Items',
  interactive = true,
  showActions = true,
}) {
  const e = window.React.createElement;

  return e(
    'div',
    { className: 'space-y-3' },

    // Header with add button
    e(
      'div',
      { className: 'flex justify-between items-center' },
      e('h4', { className: 'text-md font-bold text-blue-400' }, title),
      e(
        'button',
        {
          onClick: () => onAdd(itemType),
          className:
            'bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded-md',
        },
        'Add'
      )
    ),

    // Items list
    items.length === 0
      ? e(
          'p',
          { className: 'text-gray-500 text-sm text-center py-4' },
          `No ${itemType || 'financial'} items`
        )
      : e(
          'div',
          { className: 'space-y-2' },
          items.map((item) =>
            e(FinancialItemCard, {
              key: item.id,
              item,
              itemType,
              onEdit,
              onDelete,
              onDeleteConfirm,
              onDeleteCancel,
              confirmingDelete: confirmingDelete === item.id,
              interactive,
              showActions,
            })
          )
        )
  );
}

/**
 * FinancialItemGrid - Display multiple financial items in a responsive grid layout
 */
function FinancialItemGrid({
  items = [],
  itemType,
  onEdit = () => {},
  onDelete = () => {},
  onDeleteConfirm = () => {},
  onDeleteCancel = () => {},
  confirmingDelete = null,
  onAdd = () => {},
  title = 'Financial Items',
  interactive = true,
  showActions = true,
  columns = 'auto', // 'auto', 1, 2, 3, 4
}) {
  const e = window.React.createElement;

  // Determine grid columns class
  const getGridClass = () => {
    if (columns === 'auto') return 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3';
    return `grid-cols-${columns}`;
  };

  return e(
    'div',
    { className: 'space-y-3' },

    // Header with add button
    e(
      'div',
      { className: 'flex justify-between items-center' },
      e('h4', { className: 'text-md font-bold text-blue-400' }, title),
      e(
        'button',
        {
          onClick: () => onAdd(itemType),
          className:
            'bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded-md',
        },
        'Add'
      )
    ),

    // Items grid
    items.length === 0
      ? e(
          'p',
          { className: 'text-gray-500 text-sm text-center py-8' },
          `No ${itemType || 'financial'} items`
        )
      : e(
          'div',
          { className: `grid ${getGridClass()} gap-3` },
          items.map((item) =>
            e(FinancialItemCard, {
              key: item.id,
              item,
              itemType,
              onEdit,
              onDelete,
              onDeleteConfirm,
              onDeleteCancel,
              confirmingDelete: confirmingDelete === item.id,
              interactive,
              showActions,
            })
          )
        )
  );
}

// Register components with the business component system
if (typeof window !== 'undefined') {
  window.FinancialItemCard = FinancialItemCard;
  window.FinancialItemList = FinancialItemList;
  window.FinancialItemGrid = FinancialItemGrid;

  // Register with Business component library
  if (window.NightingaleBusiness) {
    window.NightingaleBusiness.registerComponent(
      'FinancialItemCard',
      FinancialItemCard,
      'financial',
      ['Cards', 'Badge', 'Button']
    );
    window.NightingaleBusiness.registerComponent(
      'FinancialItemList',
      FinancialItemList,
      'financial',
      ['FinancialItemCard']
    );
    window.NightingaleBusiness.registerComponent(
      'FinancialItemGrid',
      FinancialItemGrid,
      'financial',
      ['FinancialItemCard']
    );
  }
}

// Export for ES6 modules
if (typeof module !== 'undefined' &amp;&amp; module.exports) {
  module.exports = { FinancialItemCard, FinancialItemList, FinancialItemGrid };
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="FileSystemService.html">FileSystemService</a></li><li><a href="NightingaleSearchService.html">NightingaleSearchService</a></li><li><a href="ToastQueue.html">ToastQueue</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Badge">Badge</a></li><li><a href="global.html#Button">Button</a></li><li><a href="global.html#Card">Card</a></li><li><a href="global.html#CardActions">CardActions</a></li><li><a href="global.html#CardField">CardField</a></li><li><a href="global.html#CardGrid">CardGrid</a></li><li><a href="global.html#CardList">CardList</a></li><li><a href="global.html#Checkbox">Checkbox</a></li><li><a href="global.html#ConfirmationModal">ConfirmationModal</a></li><li><a href="global.html#CountBadge">CountBadge</a></li><li><a href="global.html#DataTable">DataTable</a></li><li><a href="global.html#DateInput">DateInput</a></li><li><a href="global.html#FinancialItemCard">FinancialItemCard</a></li><li><a href="global.html#FinancialItemGrid">FinancialItemGrid</a></li><li><a href="global.html#FinancialItemList">FinancialItemList</a></li><li><a href="global.html#FormField">FormField</a></li><li><a href="global.html#FormModal">FormModal</a></li><li><a href="global.html#Modal">Modal</a></li><li><a href="global.html#MultiBadge">MultiBadge</a></li><li><a href="global.html#NotesModal">NotesModal</a></li><li><a href="global.html#PersonCreationModal">PersonCreationModal</a></li><li><a href="global.html#ProgressBadge">ProgressBadge</a></li><li><a href="global.html#SearchBar">SearchBar</a></li><li><a href="global.html#Select">Select</a></li><li><a href="global.html#StepperModal">StepperModal</a></li><li><a href="global.html#TOAST_CONFIG">TOAST_CONFIG</a></li><li><a href="global.html#TextInput">TextInput</a></li><li><a href="global.html#Textarea">Textarea</a></li><li><a href="global.html#Validators">Validators</a></li><li><a href="global.html#clearAllToasts">clearAllToasts</a></li><li><a href="global.html#encodeURL">encodeURL</a></li><li><a href="global.html#formatDate">formatDate</a></li><li><a href="global.html#formatPersonName">formatPersonName</a></li><li><a href="global.html#formatPhoneNumber">formatPhoneNumber</a></li><li><a href="global.html#formatProperCase">formatProperCase</a></li><li><a href="global.html#getActiveToastCount">getActiveToastCount</a></li><li><a href="global.html#getAppDateLabel">getAppDateLabel</a></li><li><a href="global.html#getDefaultAppDetails">getDefaultAppDetails</a></li><li><a href="global.html#getFlatFinancials">getFlatFinancials</a></li><li><a href="global.html#getNextId">getNextId</a></li><li><a href="global.html#getUniqueNoteCategories">getUniqueNoteCategories</a></li><li><a href="global.html#initializeToastSystem">initializeToastSystem</a></li><li><a href="global.html#loadBusinessComponents">loadBusinessComponents</a></li><li><a href="global.html#loadComponentLayers">loadComponentLayers</a></li><li><a href="global.html#loadUIComponents">loadUIComponents</a></li><li><a href="global.html#parseAvsAccountBlock">parseAvsAccountBlock</a></li><li><a href="global.html#parseAvsData">parseAvsData</a></li><li><a href="global.html#sanitize">sanitize</a></li><li><a href="global.html#sanitizeHTML">sanitizeHTML</a></li><li><a href="global.html#setSanitizedInnerHTML">setSanitizedInnerHTML</a></li><li><a href="global.html#showSuccessToast">showSuccessToast</a></li><li><a href="global.html#showToast">showToast</a></li><li><a href="global.html#toInputDateFormat">toInputDateFormat</a></li><li><a href="global.html#updateToastConfig">updateToastConfig</a></li><li><a href="global.html#waitForUIComponents">waitForUIComponents</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Aug 20 2025 13:57:37 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
