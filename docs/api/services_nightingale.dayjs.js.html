<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: services/nightingale.dayjs.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: services/nightingale.dayjs.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Nightingale Application Suite - Shared Day.js Utility Wrapper
 *
 * This file provides a standardized, globally accessible 'dateUtils' object
 * that wraps the Day.js library. This ensures consistent date and time
 * formatting and manipulation across all applications in the suite.
 */

// Prevent multiple declarations if script loads twice
if (typeof window !== 'undefined' &amp;&amp; window.dateUtils) {
  console.log('⚠️ dateUtils already loaded, skipping redefinition');
} else {
  // The Day.js library and its plugins are expected to be loaded globally before this script.
  const dateUtils = {
    /**
     * Returns the current timestamp as an ISO 8601 string.
     * @returns {string} The current date and time in ISO format.
     */
    now: () => dayjs().toISOString(),

    /**
     * Formats a date string into a specified format.
     * @param {string} dateString - The date string to format.
     * @param {string} formatStr - The desired output format (e.g., "MM/DD/YYYY").
     * @returns {string} The formatted date string, or "N/A" if invalid.
     */
    format: (dateString, formatStr = 'MM/DD/YYYY') => {
      if (!dateString) return 'N/A';
      const date = dayjs(dateString);
      return date.isValid() ? date.format(formatStr) : 'N/A';
    },

    /**
     * Compares two dates for sorting. Returns -1 if A is before B, 1 if A is after B, 0 if equal.
     * Handles invalid dates gracefully.
     * @param {string} dateA - The first date string.
     * @param {string} dateB - The second date string.
     * @returns {number} The comparison result (-1, 0, or 1).
     */
    compareDates: (dateA, dateB) => {
      const d1 = dayjs(dateA);
      const d2 = dayjs(dateB);
      if (!d1.isValid() || !d2.isValid()) return 0;
      if (d1.isBefore(d2)) return -1;
      if (d1.isAfter(d2)) return 1;
      return 0;
    },

    /**
     * Checks if the first date is before the second date.
     * @param {string} dateToCheck The date to evaluate.
     * @param {string} dateToCompareAgainst The baseline date.
     * @returns {boolean}
     */
    isBefore: (dateToCheck, dateToCompareAgainst) => {
      const d1 = dayjs(dateToCheck);
      const d2 = dayjs(dateToCompareAgainst);
      return d1.isValid() &amp;&amp; d2.isValid() ? d1.isBefore(d2) : false;
    },

    /**
     * Calculates a date that was a specified number of months ago from now.
     * @param {number} months The number of months to subtract.
     * @returns {string} The resulting date in ISO format.
     */
    monthsAgo: (months) => dayjs().subtract(months, 'month').toISOString(),

    /**
     * Adds a specified number of days to the current date.
     * @param {number} days The number of days to add.
     * @returns {string} The resulting date in ISO format.
     */
    addDays: (days) => dayjs().add(days, 'day').toISOString(),

    /**
     * Adds a specified number of days to a given date.
     * @param {string} dateString The base date string.
     * @param {number} days The number of days to add.
     * @returns {string} The resulting date in ISO format.
     */
    addDaysToDate: (dateString, days) => {
      const date = dayjs(dateString);
      return date.isValid() ? date.add(days, 'day').toISOString() : dateString;
    },

    /**
     * Formats the current date with a specific format.
     * @param {string} formatStr The desired output format (e.g., "M/D/YYYY", "YYYY-MM-DD").
     * @returns {string} The formatted current date.
     */
    formatToday: (formatStr = 'MM/DD/YYYY') => dayjs().format(formatStr),

    /**
     * Gets today's date in YYYY-MM-DD format for HTML date input elements.
     * @returns {string} Today's date in YYYY-MM-DD format.
     */
    todayForInput: () => dayjs().format('YYYY-MM-DD'),
  };

  // Make dateUtils available globally
  window.dateUtils = dateUtils;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="FileSystemService.html">FileSystemService</a></li><li><a href="NightingaleSearchService.html">NightingaleSearchService</a></li><li><a href="ToastQueue.html">ToastQueue</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Badge">Badge</a></li><li><a href="global.html#Button">Button</a></li><li><a href="global.html#Card">Card</a></li><li><a href="global.html#CardActions">CardActions</a></li><li><a href="global.html#CardField">CardField</a></li><li><a href="global.html#CardGrid">CardGrid</a></li><li><a href="global.html#CardList">CardList</a></li><li><a href="global.html#Checkbox">Checkbox</a></li><li><a href="global.html#ConfirmationModal">ConfirmationModal</a></li><li><a href="global.html#CountBadge">CountBadge</a></li><li><a href="global.html#DataTable">DataTable</a></li><li><a href="global.html#DateInput">DateInput</a></li><li><a href="global.html#FinancialItemCard">FinancialItemCard</a></li><li><a href="global.html#FinancialItemGrid">FinancialItemGrid</a></li><li><a href="global.html#FinancialItemList">FinancialItemList</a></li><li><a href="global.html#FormField">FormField</a></li><li><a href="global.html#FormModal">FormModal</a></li><li><a href="global.html#Modal">Modal</a></li><li><a href="global.html#MultiBadge">MultiBadge</a></li><li><a href="global.html#NotesModal">NotesModal</a></li><li><a href="global.html#PersonCreationModal">PersonCreationModal</a></li><li><a href="global.html#ProgressBadge">ProgressBadge</a></li><li><a href="global.html#SearchBar">SearchBar</a></li><li><a href="global.html#Select">Select</a></li><li><a href="global.html#StepperModal">StepperModal</a></li><li><a href="global.html#TOAST_CONFIG">TOAST_CONFIG</a></li><li><a href="global.html#TextInput">TextInput</a></li><li><a href="global.html#Textarea">Textarea</a></li><li><a href="global.html#Validators">Validators</a></li><li><a href="global.html#clearAllToasts">clearAllToasts</a></li><li><a href="global.html#encodeURL">encodeURL</a></li><li><a href="global.html#formatDate">formatDate</a></li><li><a href="global.html#formatPersonName">formatPersonName</a></li><li><a href="global.html#formatPhoneNumber">formatPhoneNumber</a></li><li><a href="global.html#formatProperCase">formatProperCase</a></li><li><a href="global.html#getActiveToastCount">getActiveToastCount</a></li><li><a href="global.html#getAppDateLabel">getAppDateLabel</a></li><li><a href="global.html#getDefaultAppDetails">getDefaultAppDetails</a></li><li><a href="global.html#getFlatFinancials">getFlatFinancials</a></li><li><a href="global.html#getNextId">getNextId</a></li><li><a href="global.html#getUniqueNoteCategories">getUniqueNoteCategories</a></li><li><a href="global.html#initializeToastSystem">initializeToastSystem</a></li><li><a href="global.html#loadBusinessComponents">loadBusinessComponents</a></li><li><a href="global.html#loadComponentLayers">loadComponentLayers</a></li><li><a href="global.html#loadUIComponents">loadUIComponents</a></li><li><a href="global.html#parseAvsAccountBlock">parseAvsAccountBlock</a></li><li><a href="global.html#parseAvsData">parseAvsData</a></li><li><a href="global.html#sanitize">sanitize</a></li><li><a href="global.html#sanitizeHTML">sanitizeHTML</a></li><li><a href="global.html#setSanitizedInnerHTML">setSanitizedInnerHTML</a></li><li><a href="global.html#showSuccessToast">showSuccessToast</a></li><li><a href="global.html#showToast">showToast</a></li><li><a href="global.html#toInputDateFormat">toInputDateFormat</a></li><li><a href="global.html#updateToastConfig">updateToastConfig</a></li><li><a href="global.html#waitForUIComponents">waitForUIComponents</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Aug 20 2025 13:57:37 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
